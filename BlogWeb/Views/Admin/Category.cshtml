@model IEnumerable<BlogWeb.DL.Models.Category>
@{
    ViewData["Title"] = "YoneticiKategori";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

@{
    int adet = Convert.ToInt16(TempData["CategoryCount"]);
    int EklemeSonuc = Convert.ToInt16(TempData["EklemeSonuc"]);
    int GüncellemeSonuc = Convert.ToInt16(TempData["GüncellemeSonuc"]);
}
@if (adet == 0)
{
    @* <div class="alert alert-warning" role="alert"> <h6>Henüz Kategori Eklemediniz</h6></div>*@


    <div class="alert alert-dismissible alert-warning">
        <h4 class="alert-heading">Uyarı!</h4>
        <p class="mb-0" style="color:black;">Henüz Kategori Eklemediniz.</p>
    </div>

}
@if (EklemeSonuc == 1)
{
    <div class="alert alert-dismissible alert-success">
        @*<button type="button" class="btn-close" data-bs-dismiss="alert"></button>*@
        <strong>Ekleme Başarılı!</strong> <p> Kategori Başarılı Bir Şekilde Eklendi</p>
    </div>
}
@if (GüncellemeSonuc == 1)
{
    <div class="alert alert-dismissible alert-success">
        <strong>Güncelleme Başarılı!</strong> <p>Kategori Başarılı Bir Şekilde Güncellendi </p>
    </div>
}

@if (adet > 0)
{
    <table class="table table-hover" style="width:100%;">
        <thead class="">
            <tr>
                <th>Kategori Adı</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr class="row">
                    <td class="col-md-8 "> &nbsp; @item.CategoryName</td>
                    <td class="col-md-4">
                        <div class="btn-group">
                            <a asp-controller="Admin" asp-action="GetCategory" asp-route-id="@item.CategoryId" class="btn btn-warning mx-2">Düzenle</a>
                            <a onclick="deneme(@item.CategoryId)" class="btn btn-danger">Sil</a>
                        </div>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}


<a asp-controller="Admin" asp-action="CategoryCreate" class="btn btn-success" style="color:white; border-radius:2px;">Hemen Ekle</a>

<script>
    function deneme(id) {
        swal({
            title: "Emin misiniz?",
            text: "Kategori bilgisini silmek için emin misiniz?",
            icon: "warning",
            buttons: true,
            dangerMode: true,
        })
            .then((willDelete) => {
                if (willDelete) {
                    window.location.replace('/Admin/CategoryDelete/' + id),
                        swal("Poof! Kategori Silindi!", {
                            icon: "success",
                        });
                }
            });
    }


</script>

<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
